{"version":3,"sources":["like.js","settings.js","dictionary.js","draw.js","game.js","store.js","bezel.js","index.js"],"names":["Like","A","href","target","role","aria-label","styled","a","ulog","Settings","dispatch","useDispatch","current_grade","useSelector","state","grade","current_difficulty","difficulty","Area","Row","Title","Buttons","Object","keys","kanji","map","Button","selected","key","onClick","type","div","props","Dictionary","Table","Array","_","i","Entry","id","Cell","Stroke","Reading","log","Canvas","ref","useRef","down","event","st","drawing","debug","up","useLayoutEffect","canvas","current","move","e","movezz","r","getBoundingClientRect","scale","width","addEventListener","removeEventListener","Canvase","height","x","y","touches","t","pageX","offsetLeft","pageY","offsetTop","offsetX","offsetY","ctx","getContext","fillStyle","fillRect","Game","editing","Info","Glass","Zoom","value","tiles","editable","length","edit","Nib","src","alt","tools","window","__REDUX_DEVTOOLS_EXTENSION__","INITIAL","undefined","glyphs","sudoku","createStore","action","produce","draft","warn","sudoku_board","data","sudokus","Math","floor","random","join","d","parseInt","Bezel","store","Frame","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fd23c39a.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components/macro\";\n\nconst Like = () => <A href=\"https://forms.gle/v6s3mCoHyfndDqxJA\" target=\"_blank\">\n  <span role=\"img\" aria-label=\"like\">👍</span> ∕ <span role=\"img\" aria-label=\"dislike\">👎</span></A>;\n\nexport default Like;\n\nconst A = styled.a`\n  flex: none;\n  margin: auto 0 auto 1em;\n  text-decoration: none;\n  padding: .25em .5em;\n  border: 1px solid black;\n  border-radius: .5em;\n  &:hover { background-color: rgba(255,0,0,.1); }\n`;\n","import React from \"react\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport styled from \"styled-components/macro\";\nimport {filename} from \"paths.macro\";\nimport ulog from \"ulog\";\nimport kanji from \"kanji.json\";\nimport Like from \"like\";\nconst log = ulog(filename);  // eslint-disable-line no-unused-vars\n\nconst Settings = () => {\n  const dispatch = useDispatch();\n  const current_grade = useSelector(state => state.grade);\n  const current_difficulty = useSelector(state => state.difficulty);\n  return <Area>\n    <Row>\n      <Title>Kanji grade:</Title>\n      <Buttons>{\n        Object.keys(kanji).map(grade => \n          <Button\n            role=\"button\"\n            selected={grade === current_grade}\n            key={grade}\n            onClick={() => dispatch({type: \"GRADE\", grade})}>\n            {grade}\n          </Button>)\n      }</Buttons>\n    </Row>\n    <Row>\n      <Title>Sudoku difficulty:</Title>\n      <Buttons>{\n        [\"easy\", \"medium\", \"hard\"].map(difficulty =>\n          <Button\n            role=\"button\"\n            selected={difficulty === current_difficulty}\n            key={difficulty}\n            onClick={() => dispatch({type: \"DIFFICULTY\", difficulty})}>\n            {difficulty}\n          </Button>)\n      }</Buttons>\n      <Like/>\n    </Row>\n  </Area>;\n};\n\nexport default Settings;\n\nconst Area = styled.div`\n  flex: none;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Row = styled.div`\n  flex: none;\n  display: flex;\n  margin: .5em 0;\n  font-size: 2vmin;\n  font-family: \"HelveticaNeue\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n`;\n\nconst Title = styled.div`\n  flex: auto;\n  margin: auto 0;\n`;\n\nconst Buttons = styled.div`\n  flex: none;\n  display: flex;\n`;\n\nconst Button = styled.div`\n  box-sizing: border-box;\n  padding: .25em .5em;\n  border-left: 1px solid black;\n  border-top: 1px solid black;\n  border-bottom: 1px solid black;\n  cursor: pointer;\n  background-color: ${ props => props.selected?\"gold\":\"white\" };\n  &:hover {\n    background-color: rgba(255,0,0,.1);\n  }\n  &:first-child {\n    border-top-left-radius: .5em;\n    border-bottom-left-radius: .5em;\n    padding-left: .5em;\n  }\n  &:last-child {\n    border-right: 1px solid black;\n    border-top-right-radius: .5em;\n    border-bottom-right-radius: .5em;\n    padding-right: .5em;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport PropTypes from \"prop-types\";\n\nconst Dictionary = () => {\n  return <Table>\n    { [...new Array(9)].map((_, i) => <Entry key={i} id={i}/>) }\n  </Table>;\n};\n\nexport default Dictionary;\n\nconst Entry = ({id}) => {\n  return <Cell>\n    <Stroke>{id}</Stroke>\n    <Reading>reading</Reading>\n    <Reading>reading</Reading>\n  </Cell>;\n};\n\nEntry.propTypes = {id: PropTypes.number.isRequired};\n\nconst Table = styled.div`\n  display: grid;\n  grid: repeat(3, 1fr) / auto-flow;\n  gap: 1px;\n  background-color: rgba(0,0,0,.3);\n  box-sizing: border-box;\n  border: 1px solid black;\n  margin: 1vmin 0;\n`;\n\nconst Cell = styled.div`\n  background-color: white;\n  display: grid;\n  grid-template-columns: 1fr 3fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  grid-template-areas:\n    \"stroke reading-kun\"\n    \"stroke reading-on\"\n    \"stroke .\";\n`;\n\nconst Stroke = styled.div`\n  grid-area: stroke;\n  font-size: 8vmin;\n  font-family: \"Kanji Stroke Order\";\n`;\n\nconst Reading = styled.div`\n  font-size: 2vmin;\n`;\n","import React, {useRef, useLayoutEffect} from \"react\";\nimport styled from \"styled-components/macro\";\nimport {filename} from \"paths.macro\";\nimport ulog from \"ulog\";\nconst log = ulog(filename);  // eslint-disable-line no-unused-vars\nconst SIZE = 1000;\n\nconst Canvas = () => {\n  const ref = useRef();\n\n  const down = event => {\n    st.drawing = true;\n    //st.x = event.offsetX * st.scale;\n    //st.y = event.offsetY * st.scale;\n    log.debug(event);\n  };\n  const up = event => {\n    st.drawing = false;\n    log.debug(\"up\", event);\n  };\n\n  useLayoutEffect(() => {\n    const canvas = ref.current;\n    const move = e => movezz(e, ref);\n    const r = canvas.getBoundingClientRect();\n    st.scale = SIZE / r.width;\n    canvas.addEventListener(\"touchstart\", down);\n    canvas.addEventListener(\"touchmove\", move);\n    canvas.addEventListener(\"touchend\", up);\n    canvas.addEventListener(\"mousedown\", down);\n    canvas.addEventListener(\"mousemove\", move);\n    canvas.addEventListener(\"mouseup\", up);\n\n    return () => {\n      if (canvas) {\n        canvas.removeEventListener(\"touchstart\", down);\n        canvas.removeEventListener(\"touchmove\", move);\n        canvas.removeEventListener(\"touchend\", up);\n        canvas.removeEventListener(\"mousedown\", down);\n        canvas.removeEventListener(\"mousemove\", move);\n        canvas.removeEventListener(\"mouseup\", up);\n      }\n      st.drawing = false;\n    };\n  }, [ref]);\n  return <Canvase width={SIZE} height={SIZE} ref={ref}/>;\n};\n\nexport default Canvas;\n\nconst movezz = (event, ref) => {\n  if (st.drawing) {\n    let x, y;\n    if (event.touches) {\n      const t = event.touches[0];\n      x = (t.pageX - t.target.offsetLeft) * st.scale;\n      y = (t.pageY - t.target.offsetTop) * st.scale;\n    }\n    else {\n      x = event.offsetX * st.scale;\n      y = event.offsetY * st.scale;\n    }\n    const canvas = ref.current;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = \"green\";\n    ctx.fillRect(x, y, 3, 3);\n    st.x = x;\n    st.y = y;\n  }\n};\n\n\nconst st = {\n  drawing: false,\n  x: 0,\n  y: 0,\n  scale: 1,\n};\n\nconst Canvase = styled.canvas`\n  flex: auto;\n  cursor: crosshair;\n`;\n","import React from \"react\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport styled from \"styled-components/macro\";\nimport PropTypes from \"prop-types\";\nimport {filename} from \"paths.macro\";\nimport ulog from \"ulog\";\nimport reading from \"reading.json\";\nimport easy from \"easy.json\";\nimport kanji from \"kanji.json\";\nimport Canvas from \"draw\";\nconst log = ulog(filename);  // eslint-disable-line no-unused-vars\n\nconst Game = () => {\n  const editing = useSelector(state => state.editing);\n  void(reading);\n  void(easy);\n  void(kanji);\n  return <>\n    <Info>info</Info>;\n    <Area>\n      {[...new Array(9*9)].map((_, i) => <Cell key={i} id={i}/>)}\n      {editing?<Glass><Zoom><Canvas/></Zoom></Glass>:null}\n    </Area>\n  </>;\n};\n\nexport default Game;\n\nconst Cell = ({id}) => {\n  // Either a single Kanji (prefilled cell, selected by computer),\n  // or a data URI (empty cell edited by user) or undefined (not edited)\n  const value = useSelector(state => state.tiles[id]);\n  const dispatch = useDispatch();\n  const editable = !value || value.length > 1;\n  const edit = editable && (() => dispatch({type: \"GAME.EDIT\", id}));\n  return <Nib onClick={edit}>{editable?<img src={value} alt=\"\"/>:value}</Nib>;\n};\n\nCell.propTypes = {id: PropTypes.number.isRequired};\n\nconst Info = styled.div`\n  flex: 0 0 40vmin;\n`;\n\nconst Area = styled.div`\n  position: relative;\n  flex: 0 0 100vmin;\n  outline: 1px dashed orange;\n  display: grid;\n  grid: repeat(9, 10vmin) / auto-flow 10vmin;\n`;\n\nconst Nib = styled.div`\n  text-align: center;\n  line-height: 10vmin;\n  box-sizing: border-box;\n  border-top: 0.3vmin solid rgba(0,0,0,.3);\n  border-left: 0.3vmin solid rgba(0,0,0,.3);\n  &:nth-child(9n) { border-bottom: 0.3vmin solid black; }\n  &:nth-child(n+73) { border-right: 0.3vmin solid black; }\n  &:nth-child(3n+1) { border-top: 0.3vmin solid black; }\n  &:nth-child(-n+9),\n  &:nth-child(n+28):nth-child(-n+36),\n  &:nth-child(n+55):nth-child(-n+63) { border-left: 0.3vmin solid black; }\n`;\n\nconst Glass = styled.div`\n  position: absolute;\n  top: 0;\n  width: 90vmin;\n  height: 90vmin;\n  backdrop-filter: blur(1px);  /* except firefox :( */\n  box-sizing: border-box;\n  display: flex;\n`;\n\nconst Zoom = styled.div`\n  margin: auto;\n  height: 60vmin;\n  width: 60vmin;\n  background-color: white;\n  box-sizing: border-box;\n  box-shadow: #aaa 0 0 10vmin;\n  border-radius: 0.5vmin;\n  padding: 0.5vmin;\n  display: flex;\n`;\n","import {createStore} from \"redux\";\nimport {produce} from \"immer\";\nimport {filename} from \"paths.macro\";\nimport sudokus from \"easy.json\";\nimport ulog from \"ulog\";\nconst log = ulog(filename);\n\nconst tools = window?.__REDUX_DEVTOOLS_EXTENSION__?.();\n\nconst INITIAL = {\n  grade: undefined,\n  difficulty: undefined,\n  glyphs: [...new Array(9)],\n  sudoku: [...new Array(9*9)],\n  editing: undefined,\n  tiles: [...new Array(9*9)],  // either a single Kanji or a data URI\n};\n\nconst reducer = (state=INITIAL, action) => produce(state, draft => {\n  log.warn(action);\n  switch (action.type) {\n  case \"DIFFICULTY\":\n    draft.difficulty = action.difficulty;\n    draft.sudoku = sudoku_board(draft.difficulty);\n    return;\n  case \"GRADE\":\n    draft.grade = action.grade;\n    draft.sudoku = sudoku_board(draft.difficulty);\n    return;\n  case \"EDIT\":\n    draft.editing = action.id;\n    return;\n  case \"SAVE_TILE\":\n    draft.tiles[action.id] = action.data;\n    return;\n  default:\n    return;\n  }\n});\n\nexport default createStore(reducer, tools);\n\nconst sudoku_board = (difficulty) => {\n  void(difficulty);\n  const s = sudokus[Math.floor(Math.random() * sudokus.length)];\n  // FIXME perhaps edit the sudoku JSON file instead\n  // [\"..1\", \".2.\", ...] → [und, und, 0, und, 1, und, ...]\n  return [...s.join(\"\")].map(d => d === \".\"?undefined:parseInt(d)-1);\n};\n","import React from \"react\";\nimport {Provider} from \"react-redux\";\nimport {Reset} from \"styled-reset\";\nimport styled from \"styled-components/macro\";\nimport Settings from \"settings\";\nimport Dictionary from \"dictionary\";\nimport Game from \"game\";\nimport store from \"store\";\n\nconst Bezel = () => {\n  return <Provider store={store}>\n    <Frame>\n      <Reset/>\n      <Settings/>\n      <Dictionary/>\n      <Game/>\n    </Frame>\n  </Provider>;\n};\n\nexport default Bezel;\n\n// Below is for portrait mode; figure out landscape mode.\nconst Frame = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 75vmin;\n  margin: auto;\n`;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Bezel from \"bezel\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Bezel/>\n  </React.StrictMode>,\n  document.getElementById(\"root\"));\n"],"sourceRoot":""}